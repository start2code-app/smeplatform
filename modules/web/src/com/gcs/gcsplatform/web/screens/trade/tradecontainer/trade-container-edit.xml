<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<window xmlns="http://schemas.haulmont.com/cuba/screen/window.xsd"
        focusComponent="tradeTabSheet"
        messagesPack="com.gcs.gcsplatform.web.screens.trade.tradecontainer">
    <data>
        <instance id="tradeContainerDc"
                  class="com.gcs.gcsplatform.entity.trade.TradeContainer">
            <instance id="tradeDc"
                      property="trade"/>
            <view extends="_local">
                <property name="trade"
                          view="_local"/>
            </view>
            <loader/>
        </instance>
        <collection id="counterpartiesDc"
                    class="com.gcs.gcsplatform.entity.masterdata.Counterparty">
            <view extends="_local"/>
            <loader id="counterpartiesDl">
                <query>select e from gcsplatform_Counterparty</query>
            </loader>
        </collection>
        <collection id="dealersDc"
                    class="com.gcs.gcsplatform.entity.masterdata.Dealer">
            <view extends="_local"/>
            <loader id="dealersDl">
                <query>select e from gcsplatform_Dealer</query>
            </loader>
        </collection>
    </data>
    <dialogMode height="600"
                width="800"/>
    <layout spacing="true">
        <tabSheet id="tradeTabSheet">
            <tab id="descriptionTab"
                 caption="msg://descriptionTab.caption">
                <form id="descriptionForm"
                      dataContainer="tradeDc">
                    <textField id="traderefField"
                               property="traderef"/>
                    <textField id="utiField"
                               property="uti"/>
                    <textField id="bondDescriptionField"
                               property="bondDescription"/>
                    <textField id="isinField"
                               property="isin"/>
                    <textField id="currencyField"
                               property="currency"/>
                    <textField id="tradeCurrencyField"
                               property="tradeCurrency"/>
                    <textField id="nominalField"
                               property="nominal"/>
                    <textField id="repoRateField"
                               property="repoRate"/>
                    <textField id="startPriceField"
                               property="startPrice"/>
                    <textField id="hairCutField"
                               property="hairCut"/>
                </form>
            </tab>
            <tab id="counterpartiesBrokersTab"
                 caption="msg://counterpartiesBrokersTab.caption">
                <form id="counterpartiesBrokersForm"
                      dataContainer="tradeDc">
                    <textField id="buyBrokerField"
                               property="buybroker"
                               caption="Buy Broker"/>
                    <lookupPickerField id="buyBrokerLookupField"
                                       caption="Buyer Broker"
                                       optionsContainer="dealersDc">
                        <actions>
                            <action id="lookup"
                                    type="picker_lookup"/>
                            <action id="clear"
                                    type="picker_clear"/>
                        </actions>
                    </lookupPickerField>
                    <lookupPickerField id="counterpartiesLookupField"
                                       caption="Counteparty Buyer"
                                       optionsContainer="counterpartiesDc"
                                       editable="false">
                        <actions>
                            <action id="lookup"
                                    type="picker_lookup"/>
                            <action id="clear"
                                    type="picker_clear"/>
                        </actions>
                    </lookupPickerField>
                    <textField id="buyerField"
                               property="buyer"
                               caption="Counteparty Buyer"/>
                    <textField id="buyerAgentField"
                               caption="Buyer Trader"
                               property="buyerAgent"/>
                    <hbox height="20px"/>
                    <textField id="sellBrokerField"
                               caption="Sell Broker"
                               property="sellbroker"/>

                    <lookupPickerField id="sellBrokerLookupField"
                                       caption="Seller Broker"
                                       optionsContainer="dealersDc">
                        <actions>
                            <action id="lookup"
                                    type="picker_lookup"/>
                            <action id="clear"
                                    type="picker_clear"/>
                        </actions>
                    </lookupPickerField>
                    <lookupPickerField id="sellcounterpartiesLookupField"
                                       caption="Counteparty Seller"
                                       optionsContainer="counterpartiesDc"
                                       editable="false">
                        <actions>
                            <action id="lookup"
                                    type="picker_lookup"/>
                            <action id="clear"
                                    type="picker_clear"/>
                        </actions>
                    </lookupPickerField>
                    <textField id="sellerField"
                               caption="Counteparty Seller"
                               property="seller"/>
                    <textField id="sellerAgentField"
                               caption="Seller Trader"
                               property="sellerAgent"/>
                </form>
            </tab>
            <tab id="brokerageTab"
                 caption="msg://brokerageTab.caption">
                <form id="brokerageForm"
                      dataContainer="tradeDc">
                    <checkBox id="gcField"
                              property="gc"/>
                    <checkBox id="specialField"
                              property="special"/>
                    <checkBox id="brooverideField"
                              property="brooveride"/>

                    <lookupField id="categoryLookup"
                                 newOptionAllowed="false"
                                 textInputAllowed="false"/>

                    <textField id="categoryField"
                               property="category"
                               visible="false"/>
                    <vbox/>
                    <checkBox id="subsField"
                              property="subs"/>
                    <textField id="origtraderefField"
                               property="origtraderef"/>
                    <vbox/>

                    <textField id="SellbrokerageField"
                               property="sellbrokerage"
                               enable="false">


                    </textField>
                    <textField id="BuybrokerageField"
                               property="buybrokerage"
                               enable="false">

                    </textField>


                    <textField id="statusField"
                               property="status"/>


                </form>
            </tab>

            <tab id="datesTab"
                 caption="msg://datesTab.caption">
                <form id="datesForm"
                      dataContainer="tradeDc">
                    <dateField id="valueDateField"
                               property="valueDate"/>
                    <dateField id="maturityDateField"
                               property="maturityDate"
                               visible="false"/>
                    <dateField id="_maturityDateField"
                               caption="Maturity Date"/>
                    <dateField id="tradeDateField"
                               property="tradeDate"/>
                    <dateField id="updatedOnField"
                               property="updatedOn"/>
                    <dateField id="createdField"
                               property="created"/>
                </form>
            </tab>

            <tab id="notesTab"
                 caption="msg://notesTab.caption">
                <form id="notesForm"
                      dataContainer="tradeDc">
                    <textArea id="notesField"
                              caption="Notes"
                              cols="40"
                              rows="3"/>
                </form>
            </tab>
        </tabSheet>
        <hbox id="editActions"
              spacing="true">
            <button id="commitAndCloseBtn"
                    action="windowCommitAndClose"/>
            <button id="closeBtn"
                    action="windowClose"/>
        </hbox>
    </layout>
</window>
