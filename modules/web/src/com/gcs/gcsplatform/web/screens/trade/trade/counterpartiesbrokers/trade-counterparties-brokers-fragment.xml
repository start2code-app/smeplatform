<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<fragment xmlns="http://schemas.haulmont.com/cuba/screen/fragment.xsd">
    <data>
        <instance id="tradeDc"
                  class="com.gcs.gcsplatform.entity.trade.Trade"
                  provided="true"/>
        <collection id="counterpartiesDc"
                    class="com.gcs.gcsplatform.entity.masterdata.Counterparty">
            <view extends="_minimal"/>
            <loader id="counterpartiesDl">
                <query>select e from gcsplatform_Counterparty e order by e.counterparty</query>
            </loader>
        </collection>
        <collection id="dealersDc"
                    class="com.gcs.gcsplatform.entity.masterdata.Dealer">
            <view extends="_minimal"/>
            <loader id="dealersDl">
                <query>select e from gcsplatform_Dealer e order by e.dealer</query>
            </loader>
        </collection>
        <collection id="agentsDc"
                    class="com.gcs.gcsplatform.entity.masterdata.Agent">
            <view extends="_minimal">
                <property name="counterparty"
                          view="_minimal"/>
            </view>
            <loader id="agentsDl">
                <query>select e from gcsplatform_Agent e order by e.agent</query>
            </loader>
        </collection>
    </data>
    <layout spacing="true">
        <groupBox id="buyBox"
                  spacing="true"
                  caption="msg://buyGroupBox.caption"
                  css="width:100%">
            <form>
                <lookupPickerField id="buyBrokerLookupPickerField"
                                   caption="msg://com.gcs.gcsplatform.entity.trade/Trade.buybroker"
                                   optionsContainer="dealersDc">
                    <actions>
                        <action id="lookup"
                                type="picker_lookup"/>
                        <action id="clear"
                                type="picker_clear"/>
                    </actions>
                </lookupPickerField>
                <lookupPickerField id="buyerLookupPickerField"
                                   caption="msg://com.gcs.gcsplatform.entity.trade/Trade.buyer"
                                   optionsContainer="counterpartiesDc">
                    <actions>
                        <action id="lookup"
                                type="picker_lookup"/>
                        <action id="clear"
                                type="picker_clear"/>
                    </actions>
                </lookupPickerField>
                <lookupPickerField id="buyerAgentLookupPickerField"
                                   caption="msg://com.gcs.gcsplatform.entity.trade/Trade.buyerAgent"
                                   optionsContainer="agentsDc">
                    <actions>
                        <action id="lookup"
                                type="picker_lookup"/>
                        <action id="clear"
                                type="picker_clear"/>
                    </actions>
                </lookupPickerField>
            </form>
        </groupBox>
        <groupBox id="sellBox"
                  spacing="true"
                  caption="msg://sellGroupBox.caption"
                  css="width:100%">
            <form>
                <lookupPickerField id="sellBrokerLookupPickerField"
                                   caption="msg://com.gcs.gcsplatform.entity.trade/Trade.sellbroker"
                                   optionsContainer="dealersDc">
                    <actions>
                        <action id="lookup"
                                type="picker_lookup"/>
                        <action id="clear"
                                type="picker_clear"/>
                    </actions>
                </lookupPickerField>
                <lookupPickerField id="sellerLookupPickerField"
                                   caption="msg://com.gcs.gcsplatform.entity.trade/Trade.seller"
                                   optionsContainer="counterpartiesDc">
                    <actions>
                        <action id="lookup"
                                type="picker_lookup"/>
                        <action id="clear"
                                type="picker_clear"/>
                    </actions>
                </lookupPickerField>
                <lookupPickerField id="sellerAgentLookupPickerField"
                                   caption="msg://com.gcs.gcsplatform.entity.trade/Trade.sellerAgent"
                                   optionsContainer="agentsDc">
                    <actions>
                        <action id="lookup"
                                type="picker_lookup"/>
                        <action id="clear"
                                type="picker_clear"/>
                    </actions>
                </lookupPickerField>
            </form>
        </groupBox>
    </layout>
</fragment>
